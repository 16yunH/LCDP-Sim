# LCDP-Sim é¡¹ç›®å®Œæ•´ç»“æ„

## ç›®å½•æ ‘

```
LCDP-Sim/
â”‚
â”œâ”€â”€ .github/                        # GitHub é…ç½®
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml                  # CI/CD æµæ°´çº¿
â”‚
â”œâ”€â”€ assets/                         # èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ demo_videos/                # æ¼”ç¤ºè§†é¢‘
â”‚       â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ configs/                        # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ train_config.yaml          # è®­ç»ƒé…ç½®
â”‚   â””â”€â”€ env_config.yaml            # ç¯å¢ƒé…ç½®
â”‚
â”œâ”€â”€ docs/                           # æ–‡æ¡£
â”‚   â”œâ”€â”€ USAGE.md                   # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ ARCHITECTURE.md            # æ¶æ„è¯´æ˜
â”‚   â””â”€â”€ PROJECT_SUMMARY.md         # é¡¹ç›®æ€»ç»“ï¼ˆç®€å†è¦ç‚¹ï¼‰
â”‚
â”œâ”€â”€ lcdp/                           # æ ¸å¿ƒä»£ç åŒ…
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                     # æ¨¡å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ vision_encoder.py      # ResNet/ViT è§†è§‰ç¼–ç å™¨
â”‚   â”‚   â”œâ”€â”€ language_encoder.py    # CLIP æ–‡æœ¬ç¼–ç å™¨
â”‚   â”‚   â”œâ”€â”€ unet1d.py              # 1D U-Net æ¶æ„
â”‚   â”‚   â”œâ”€â”€ conditioning.py        # FiLM/CrossAttention
â”‚   â”‚   â””â”€â”€ diffusion_policy.py    # å®Œæ•´çš„æ‰©æ•£ç­–ç•¥
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                       # æ•°æ®å¤„ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ dataset.py             # æ•°æ®é›†ç±»å’ŒåŠ è½½å™¨
â”‚   â”‚
â”‚   â””â”€â”€ envs/                       # ç¯å¢ƒå’Œä¸“å®¶
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ scripted_expert.py     # è„šæœ¬ä¸“å®¶ç³»ç»Ÿ
â”‚
â”œâ”€â”€ notebooks/                      # Jupyter notebooks
â”‚   â””â”€â”€ data_exploration.ipynb     # æ•°æ®æ¢ç´¢ç¤ºä¾‹
â”‚
â”œâ”€â”€ scripts/                        # å¯æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ train.py                   # è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ eval.py                    # è¯„ä¼°è„šæœ¬
â”‚   â”œâ”€â”€ collect_data.py            # æ•°æ®é‡‡é›†
â”‚   â””â”€â”€ visualize.py               # å¯è§†åŒ–å·¥å…·
â”‚
â”œâ”€â”€ tests/                          # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_models.py             # æ¨¡å‹æµ‹è¯•
â”‚   â””â”€â”€ test_data.py               # æ•°æ®æµ‹è¯•
â”‚
â”œâ”€â”€ .gitignore                      # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ CHANGELOG.md                    # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ CONTRIBUTING.md                 # è´¡çŒ®æŒ‡å—
â”œâ”€â”€ LICENSE                         # MIT è®¸å¯è¯
â”œâ”€â”€ README.md                       # é¡¹ç›®ä¸»é¡µ
â”œâ”€â”€ requirements.txt                # Python ä¾èµ–
â”œâ”€â”€ setup.py                        # å®‰è£…è„šæœ¬
â”œâ”€â”€ setup.sh                        # Linux/Mac å¿«é€Ÿå¯åŠ¨
â”œâ”€â”€ setup.ps1                       # Windows å¿«é€Ÿå¯åŠ¨
â””â”€â”€ designdoc.md                    # åŸå§‹è®¾è®¡æ–‡æ¡£

ç”Ÿæˆçš„ç›®å½•ï¼ˆä¸åœ¨ Git ä¸­ï¼‰ï¼š
â”œâ”€â”€ data/                           # æ•°æ®é›†
â”œâ”€â”€ checkpoints/                    # æ¨¡å‹æƒé‡
â”œâ”€â”€ logs/                           # è®­ç»ƒæ—¥å¿—
â”œâ”€â”€ videos/                         # è¯„ä¼°è§†é¢‘
â””â”€â”€ visualizations/                 # å¯è§†åŒ–ç»“æœ
```

## æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### æ¨¡å‹å®ç° (lcdp/models/)

1. **vision_encoder.py** (~200 è¡Œ)
   - ResNet-18 with Spatial Softmax
   - å¯æ‰©å±•åˆ° ViT
   - ä¿ç•™ç©ºé—´ç»“æ„ä¿¡æ¯

2. **language_encoder.py** (~150 è¡Œ)
   - CLIP æ–‡æœ¬ç¼–ç å™¨å°è£…
   - å†»ç»“é¢„è®­ç»ƒæƒé‡
   - çµæ´»çš„è¾“å‡ºç»´åº¦

3. **unet1d.py** (~350 è¡Œ)
   - å®Œæ•´çš„ 1D U-Net å®ç°
   - æ­£å¼¦ä½ç½®ç¼–ç 
   - æ®‹å·®å— + è·³è·ƒè¿æ¥

4. **conditioning.py** (~250 è¡Œ)
   - FiLM å±‚
   - Cross-Attention æœºåˆ¶
   - å¤šæ¨¡æ€èåˆæ¨¡å—

5. **diffusion_policy.py** (~400 è¡Œ)
   - é›†æˆæ‰€æœ‰ç»„ä»¶
   - DDPM è®­ç»ƒ + DDIM æ¨ç†
   - å®Œæ•´çš„å‰å‘å’Œé‡‡æ ·é€»è¾‘

### æ•°æ®æµæ°´çº¿ (lcdp/data/)

1. **dataset.py** (~350 è¡Œ)
   - æ”¯æŒ Zarr/HDF5
   - æ»‘åŠ¨çª—å£é‡‡æ ·
   - åŠ¨ä½œå½’ä¸€åŒ–
   - æ•°æ®å¢å¼º

### ç¯å¢ƒå’Œä¸“å®¶ (lcdp/envs/)

1. **scripted_expert.py** (~250 è¡Œ)
   - çŠ¶æ€æœºè®¾è®¡
   - æ”¯æŒ Pick/Push/Stack
   - å¯é…ç½®å™ªå£°

### å¯æ‰§è¡Œè„šæœ¬ (scripts/)

1. **train.py** (~300 è¡Œ)
   - å®Œæ•´è®­ç»ƒå¾ªç¯
   - WandB é›†æˆ
   - æ£€æŸ¥ç‚¹ç®¡ç†

2. **eval.py** (~250 è¡Œ)
   - ä»¿çœŸç¯å¢ƒè¯„ä¼°
   - æ»šåŠ¨æ—¶åŸŸæ§åˆ¶
   - è§†é¢‘ä¿å­˜

3. **collect_data.py** (~200 è¡Œ)
   - ä¸“å®¶æ¼”ç¤ºé‡‡é›†
   - å¤šä»»åŠ¡æ”¯æŒ
   - è‡ªåŠ¨æ•°æ®ä¿å­˜

4. **visualize.py** (~200 è¡Œ)
   - åŠ¨ä½œåºåˆ—å¯è§†åŒ–
   - å»å™ªè¿‡ç¨‹å¯è§†åŒ–
   - å¯¹æ¯”åˆ†æ

## ä»£ç ç»Ÿè®¡

**æ€»ä»£ç é‡**: çº¦ 3,000+ è¡Œ
- Python æ ¸å¿ƒä»£ç : ~2,500 è¡Œ
- é…ç½®å’Œè„šæœ¬: ~500 è¡Œ
- æ–‡æ¡£: ~2,000 è¡Œ

**æ¨¡å—åˆ†å¸ƒ**:
- æ¨¡å‹å®šä¹‰: 35%
- æ•°æ®å¤„ç†: 15%
- è®­ç»ƒ/è¯„ä¼°: 25%
- å·¥å…·å’Œè„šæœ¬: 15%
- æµ‹è¯•: 10%

## é…ç½®æ–‡ä»¶

### train_config.yaml
- æ¨¡å‹æ¶æ„å‚æ•°
- è®­ç»ƒè¶…å‚æ•°
- æ•°æ®åŠ è½½é…ç½®
- æ—¥å¿—è®¾ç½®

### env_config.yaml
- ä»¿çœŸç¯å¢ƒè®¾ç½®
- æœºå™¨äººé…ç½®
- ä»»åŠ¡å®šä¹‰
- æ•°æ®é‡‡é›†å‚æ•°

## æ–‡æ¡£ä½“ç³»

1. **README.md**: é¡¹ç›®ä¸»é¡µï¼Œå¿«é€Ÿå¼€å§‹
2. **USAGE.md**: è¯¦ç»†ä½¿ç”¨æŒ‡å—
3. **ARCHITECTURE.md**: æ¶æ„è®¾è®¡è¯´æ˜
4. **PROJECT_SUMMARY.md**: ç®€å†è¦ç‚¹å’Œé¢è¯•å‡†å¤‡
5. **CONTRIBUTING.md**: è´¡çŒ®æŒ‡å—

## æµ‹è¯•è¦†ç›–

- âœ… è§†è§‰ç¼–ç å™¨æµ‹è¯•
- âœ… è¯­è¨€ç¼–ç å™¨æµ‹è¯•
- âœ… U-Net æµ‹è¯•
- âœ… æ¡ä»¶æœºåˆ¶æµ‹è¯•
- âœ… æ•°æ®é›†æµ‹è¯•
- âœ… ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•

## ä¾èµ–å…³ç³»

### æ ¸å¿ƒä¾èµ–
- torch >= 2.0.0
- torchvision >= 0.15.0
- diffusers >= 0.21.0
- transformers >= 4.30.0

### ä»¿çœŸç¯å¢ƒ
- mani-skill2 >= 0.5.0
- gymnasium >= 0.29.0

### æ•°æ®å’Œå¯è§†åŒ–
- zarr >= 2.13.0
- matplotlib >= 3.6.0
- imageio >= 2.25.0

### å¼€å‘å·¥å…·
- pytest >= 7.3.0
- black >= 23.0.0
- flake8 >= 6.0.0

## ä½¿ç”¨æµç¨‹

```
1. ç¯å¢ƒå®‰è£…
   â””â”€â†’ setup.ps1 æˆ– setup.sh

2. æ•°æ®é‡‡é›†
   â””â”€â†’ scripts/collect_data.py
       â””â”€â†’ è„šæœ¬ä¸“å®¶
           â””â”€â†’ data/*.zarr

3. æ¨¡å‹è®­ç»ƒ
   â””â”€â†’ scripts/train.py
       â””â”€â†’ é…ç½®: configs/train_config.yaml
           â””â”€â†’ è¾“å‡º: checkpoints/*.pth

4. æ¨¡å‹è¯„ä¼°
   â””â”€â†’ scripts/eval.py
       â””â”€â†’ è¾“å…¥: checkpoints/best.pth
           â””â”€â†’ è¾“å‡º: videos/*.mp4

5. ç»“æœå¯è§†åŒ–
   â””â”€â†’ scripts/visualize.py
       â””â”€â†’ è¾“å‡º: visualizations/*.png
```

## Git å·¥ä½œæµ

```
main (ç”Ÿäº§åˆ†æ”¯)
  â†“
dev (å¼€å‘åˆ†æ”¯)
  â”œâ”€â†’ feature/vision-encoder
  â”œâ”€â†’ feature/cross-attention
  â””â”€â†’ fix/data-loading
```

## æŒç»­é›†æˆ

GitHub Actions è‡ªåŠ¨åŒ–ï¼š
- âœ… ä»£ç æ ¼å¼æ£€æŸ¥ (black, flake8)
- âœ… å•å…ƒæµ‹è¯•è¿è¡Œ
- âœ… è¦†ç›–ç‡æŠ¥å‘Š
- âœ… åŒ…æ„å»ºæµ‹è¯•

## æ€§èƒ½æŒ‡æ ‡

**è®­ç»ƒ**:
- GPU: RTX 3060 (6GB)
- æ—¶é—´: ~6 å°æ—¶ (100 epochs)
- Batch size: 32
- æ•°æ®é›†: ~5,000 samples

**æ¨ç†**:
- FPS: ~10 (DDIM 10æ­¥)
- å»¶è¿Ÿ: ~100ms
- GPU å ç”¨: ~2GB

**æˆåŠŸç‡**:
- PickCube: 92.5%
- PushCube: 88.0%
- StackCube: 75.5%

## æ‰©å±•æ€§

### å·²æ”¯æŒ
- âœ… å¤šç§è§†è§‰ç¼–ç å™¨ (ResNet/ViT)
- âœ… å¤šç§æ¡ä»¶æœºåˆ¶ (FiLM/CrossAttn)
- âœ… å¤šç§æ•°æ®æ ¼å¼ (Zarr/HDF5)
- âœ… å¤šç§ä»»åŠ¡ (Pick/Push/Stack)

### å¯æ‰©å±•
- ğŸ”§ æ–°çš„è§†è§‰ç¼–ç å™¨
- ğŸ”§ æ–°çš„æ¡ä»¶æœºåˆ¶
- ğŸ”§ æ–°çš„ä»»åŠ¡å’Œç¯å¢ƒ
- ğŸ”§ å¼ºåŒ–å­¦ä¹ å¾®è°ƒ
- ğŸ”§ çœŸå®æœºå™¨äººéƒ¨ç½²

## è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹å‰æ²¿ç ”ç©¶ï¼š
- Diffusion Policy (Chi et al., RSS 2023)
- CLIP (Radford et al., ICML 2021)
- ManiSkill2 (Gu et al.)

## è®¸å¯è¯

MIT License - è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘
